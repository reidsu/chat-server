(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,n){e.exports=n(79)},45:function(e,t,n){},70:function(e,t){},77:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(32),i=n.n(c),o=(n(45),n(8)),r=n(9),l=n(38),u=n(33),m=n(39),h=n(34),d=n.n(h),f=n(35),p=n.n(f),g=n(15),v=n.n(g),E=n(36),w={host:""},b=n(37),y=n.n(b),N=new(function(){function e(){Object(o.a)(this,e),this.host=w.host}return Object(r.a)(e,[{key:"getMessageList",value:function(){return fetch("".concat(this.host,"/message")).then(function(){var e=Object(E.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}},{key:"sendMessage",value:function(e){var t="".concat(this.host,"/message");fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},body:y.a.stringify({text:e})})}},{key:"clearMessage",value:function(){var e="".concat(this.host,"/message");fetch(e,{method:"DELETE"})}}]),e}()),k=(n(77),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).init=function(){N.getMessageList().then(function(t){e.setState({messageList:t})})},e.handlerInput=function(t){e.setState({inputText:t.target.value})},e.handlerKeydonw=function(t){13===t.keyCode&&e.postMessage()},e.postMessage=function(){0!==e.state.inputText.length&&(N.sendMessage(e.state.inputText),e.setState({inputText:""}))},e.clearMessage=function(){N.clearMessage()},e.state={messageList:[],inputText:""},e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.init(),document.addEventListener("keydown",this.handlerKeydonw);var e=p()(w.host);e.on("connect",function(){}),e.on("event",function(e){}),e.on("disconnect",function(){alert("\u670d\u52a1\u65ad\u5f00\u8fde\u63a5\uff0c \u8bf7\u5237\u65b0\u9875\u9762")});var t=this;e.on("message",function(e){t.init()})}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"App-content"},s.a.createElement("div",{className:"chat"},s.a.createElement("div",{className:"chat-message"},s.a.createElement("div",{className:"message-content"},s.a.createElement("ul",{className:"message-table"},this.state.messageList.map(function(e,t){return s.a.createElement("li",{key:t,className:"message-line"},e.text,s.a.createElement("div",{className:"message-time"},s.a.createElement("span",null,d()(e.creationDate).format("M-DD h:mm"))))}))),s.a.createElement("div",{className:"message-footer"},s.a.createElement("input",{className:"message-input",value:this.state.inputText,onChange:this.handlerInput}),s.a.createElement("button",{className:"message-input-btn",onClick:this.postMessage},"\u53d1\u9001"))),s.a.createElement("div",{className:"chat-file"},s.a.createElement("div",{className:"file-list"},"\u6587\u4ef6\u5217\u8868"),s.a.createElement("div",{className:"clear"},s.a.createElement("button",{className:"message-input-btn-clear",onClick:this.clearMessage},"\u6e05\u9664\u6d88\u606f"),s.a.createElement("button",{className:"message-input-btn-clear"},"\u6e05\u9664\u6587\u4ef6"))))))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[40,2,1]]]);
//# sourceMappingURL=main.3ec33c25.chunk.js.map